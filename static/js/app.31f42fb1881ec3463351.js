webpackJsonp([1],{"+cgv":function(t,e){},"23WN":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},FPgM:function(t,e){},GcMe:function(t,e){},JSfg:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/5sW"),s={provide:function(){return{reload:this.reload}},data:function(){return{title:"Register",signinShow:!0,signoutShow:!1,issignin:!0}},methods:{goHome:function(){this.$router.push({name:"HelloWorld"})},goLogin:function(){this.issignin=!0},goLogout:function(){var t=this;this.$axios.post("/api/users/logout/").then(function(e){!1===e.data.code&&(window.localStorage.setItem("loginStatus","logout"),t.signinShow=!0,t.signoutShow=!1,t.title="Register",t.$router.push({name:"HelloWorld"}))}).catch(function(t){console.log(t)})},goRegister:function(){this.issignin=!1},goTopics:function(){"login"===window.localStorage.getItem("loginStatus")?this.$router.push({path:"/topics"}):this.$router.push({path:"/login"})},changeisSign:function(){this.issignin=!0},recieveLogin:function(t){t&&(this.signinShow=!1,this.signoutShow=!0,this.title="Hi,"+window.localStorage.getItem("username"))},reload:function(){this.$nextTick(function(){this.$router.push({path:"/topics"})})}},created:function(){"login"===window.localStorage.getItem("loginStatus")&&(this.signinShow=!1,this.signoutShow=!0,this.title="Hi,"+window.localStorage.getItem("username"))},computed:{}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-content clear"},[n("span",{staticClass:"logo"},[t._v(" Learning Log")]),t._v(" "),n("span",{staticClass:"home",on:{click:t.goHome}},[t._v("Home")]),t._v(" "),t.signinShow?n("span",{staticClass:"signin"},[n("router-link",{staticClass:"routerStyle clear",attrs:{to:{path:"login"}},nativeOn:{click:function(e){return t.goLogin(e)}}},[t._v("Sign in")])],1):t._e(),t._v(" "),t.signoutShow?n("span",{staticClass:"signout",on:{click:t.goLogout}},[t._v("Sign out")]):t._e(),t._v(" "),n("span",{staticClass:"reg-login"},[n("router-link",{staticClass:"routerStyle",class:{unClick:this.signoutShow},attrs:{to:{path:"login"}},nativeOn:{click:function(e){return t.goRegister(e)}}},[t._v(t._s(t.title))])],1),t._v(" "),n("span",{staticClass:"topics",on:{click:t.goTopics}},[t._v("Topics")])])]),t._v(" "),n("router-view",{attrs:{isSignin:t.issignin},on:{recieve:t.changeisSign,loginOK:t.recieveLogin}})],1)},staticRenderFns:[]};var a=n("VU/8")(s,o,!1,function(t){n("FPgM")},null,null).exports,r=n("/ocq"),l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("hr"),t._v(" "),n("div",{staticClass:"container"},[n("h1",[t._v("学习笔记")]),t._v(" "),n("p",[t._v("欢迎使用学习笔记"),n("br"),t._v("学习笔记，记录您的每一次收获，见证您的每一次成长！")]),t._v(" "),n("h3",[t._v("今天，您学习了吗？")]),t._v(" "),n("button",[t._v("开始学习")])])])}]};var c=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(t){n("odPN")},"data-v-3687a1f9",null).exports,u={name:"login",props:["isSignin"],data:function(){return{name:"",pass:""}},methods:{sendData:function(){var t=this,e=new FormData;e.append("username",this.name),e.append("password",this.pass),this.isSignin?this.$axios.post("/api/users/Login/",e).then(function(e){!0===e.data.code&&(window.localStorage.setItem("username",t.name),window.localStorage.setItem("loginStatus","login"),t.name="",t.pass="",t.$router.push({name:"HelloWorld"}),t.$emit("loginOK",!0))}).catch(function(t){console.log(t)}):this.$axios.post("/api/users/register/",e).then(function(e){"1"===e.data.code&&(console.log("注册成功"),t.name="",t.pass="",t.$emit("recieve"))}).catch(function(t){console.log(t)})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{id:"contain"}},[n("div",{staticClass:"contain-logo"},[t._v("Learning")]),t._v(" "),t.isSignin?n("p",{staticClass:"loginP"},[t._v("Please sign in")]):t._e(),t._v(" "),t.isSignin?t._e():n("p",{staticClass:"loginP"},[t._v("Please Register")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"username",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"password",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),t.isSignin?n("div",{staticClass:"check"},[n("input",{attrs:{type:"checkbox"}}),t._v(" "),n("label",[t._v("Remember me")])]):t._e(),t._v(" "),n("input",{attrs:{type:"button",value:t.isSignin?"Sign in":"Register"},on:{click:t.sendData}})])},staticRenderFns:[]};var p=n("VU/8")(u,d,!1,function(t){n("Q7G0")},null,null).exports,h={inject:["reload"],name:"topics",data:function(){return{topicsList:[],delShow:-1,editShow:-1,addData:""}},created:function(){var t=this;this.$axios.post("/api/topics/").then(function(e){"1"===e.data.code&&(t.topicsList=e.data.message)})},mounted:function(){},methods:{changeDelShow:function(t){this.delShow=t},returnDelShoew:function(){this.delShow=-1},changeTitle:function(t){this.editShow=t},edit:function(){this.editShow=-1},addNew:function(){var t=this;if(""!==this.addData){var e=new FormData;e.append("text",this.addData),this.$axios.post("/api/new_topic/",e).then(function(e){"1"===e.data.code&&t.topicsList.push(e.data.message)}).catch(function(t){console.log(t)})}this.addData=""},deleteData:function(t,e){var n=this,i=new FormData;i.append("id",t.id),this.$axios.post("/api/delete_topic/",i).then(function(t){"1"===t.data.code&&n.topicsList.splice(e,1)}).catch(function(t){console.log(t)})},goEntries:function(t){this.$router.push({path:"/entries",query:{id:t.id,topic:t.title}})}},directives:{focus:{update:function(t,e){e.value&&t.focus()}}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topicsContent"},[n("div",{staticClass:"newModel"},[n("p",{staticClass:"titleStyle"},[t._v("新增学习任务：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.addData,expression:"addData"}],staticClass:"addInput",attrs:{type:"text",placeholder:"例如:Vue学习"},domProps:{value:t.addData},on:{input:function(e){e.target.composing||(t.addData=e.target.value)}}}),t._v(" "),n("button",{staticClass:"addBtn",on:{click:t.addNew}},[t._v("添加")])]),t._v(" "),n("div",{staticClass:"showModel"},[n("p",{staticClass:"titleStyle"},[t._v("学习列表：")]),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.topicsList.length,expression:"!topicsList.length"}],staticClass:"noneTip"},[t._v("还没有添加任何学习任务")]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.topicsList.length,expression:"topicsList.length"}]},t._l(t.topicsList,function(e,i){return n("li",{key:i,staticClass:"listStyle",on:{mouseover:function(e){return t.changeDelShow(i)},mouseleave:t.returnDelShoew,dblclick:function(e){return t.changeTitle(i)}}},[n("span",{staticClass:"item",on:{click:function(n){return t.goEntries(e)}}},[t._v(t._s(e.title))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"},{name:"show",rawName:"v-show",value:i===t.editShow,expression:"index === editShow"},{name:"focus",rawName:"v-focus",value:!0,expression:"1===1"}],staticClass:"changeInput",attrs:{type:"text"},domProps:{value:e.title},on:{blur:t.edit,keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.edit(e):null},input:function(n){n.target.composing||t.$set(e,"title",n.target.value)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:i===t.delShow&&-1===t.editShow,expression:"index === delShow && editShow === -1"}],staticClass:"del",on:{click:function(n){return t.deleteData(e,i)}}},[t._v("删除")])])}),0)])])},staticRenderFns:[]};var v=n("VU/8")(h,g,!1,function(t){n("d26x")},null,null).exports,m=n("G0J2"),f=n.n(m),_=n("GH0r");m.Quill.register("modules/ImageExtend",_.a);var w={components:{quillEditor:m.quillEditor},data:function(){return{imgUploadUrl:"http://127.0.0.1:8000/upload/",title:"",content:"",editorOption:{modules:{toolbar:{container:_.b,handlers:{image:function(){document.querySelector("#upimg button").click()}}}}}}},methods:{handleSuccess:function(t){var e=this.$refs.QuillEditor.quill;if(t){var n=e.selection.savedRange.index,i="http://127.0.0.1:8000/"+t.imgUrl;e.insertEmbed(n,"image",i),e.setSelection(n+1)}else this.$message.error("图片插入失败")},onEditorChange:function(t){t.editor,t.html;var e=t.text;this.content=e},beforeUpload:function(t,e){this.quillUpdateImg=!0},uploadSuccess:function(t,e){var n=this.$refs.myQuillEditor.quill;if("200"===t.code&&null!==t.info){var i=n.getSelection().index;n.insertEmbed(i,"image",t.info),alert(t.info),n.setSelection(i+1)}else this.$message.error("图片插入失败");this.quillUpdateImg=!1},uploadError:function(t,e){this.quillUpdateImg=!1,this.$message.error("图片插入失败")},onEditorFocus:function(t){},save:function(){var t=this;if(this.content&&this.title){var e=new FormData;e.append("title",this.title),e.append("content",this.content);var n="/api/new_entry/"+this.$route.query.id+"/";this.$axios.post(n,e).then(function(e){"1"===e.data.code&&(t.$router.go(-1),console.log("OK"))}).catch(function(t){console.log(t)})}}},created:function(){}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit"},[n("div",{staticClass:"edit-title"},[n("p",[t._v("标题：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"upload-demo",attrs:{id:"upimg",action:t.imgUploadUrl,"on-success":t.handleSuccess,multiple:""}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),n("quill-editor",{ref:"QuillEditor",staticStyle:{width:"1200px",height:"1000px",margin:"0 auto"},attrs:{options:t.editorOption},on:{focus:function(e){return t.onEditorFocus(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("button",{staticClass:"edit-save",on:{click:t.save}},[t._v("保存")])],1)},staticRenderFns:[]};var x=n("VU/8")(w,S,!1,function(t){n("JSfg")},null,null).exports,C={name:"entries",data:function(){return{topic:"",entriesList:[]}},created:function(){},mounted:function(){var t=this;this.topic=this.$route.query.topic;var e="/api/topics/"+this.$route.query.id+"/";this.$axios.post(e).then(function(e){"1"===e.data.code&&(t.entriesList=e.data.message,console.log(e.data.message))}).catch(function(t){console.log(t)})},methods:{addNewEntry:function(){this.$router.push({path:"/WriteLog",query:{id:this.$route.query.id}})},gettext:function(t){var e="";if(t.length>148)for(var n=0;n<148;n++)e+=t[n];else e=t;return e},goDetail:function(t){this.$router.push({path:"/detail",query:{id:t.id}})}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entries-content"},[n("p",{directives:[{name:"show",rawName:"v-show",value:!t.entriesList.length,expression:"!entriesList.length"}],staticClass:"Tip"},[t._v("还没有添加任何学习记录")]),t._v(" "),t.entriesList.length?n("div",[n("ul",t._l(t.entriesList,function(e,i){return n("li",{key:i,staticClass:"list",on:{click:function(n){return t.goDetail(e)}}},[n("p",{staticClass:"content-title"},[t._v(t._s(e.title)+"\n          "),n("span",{staticClass:"time"},[t._v(t._s(e.data))])]),t._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.gettext(e.text))}})])}),0)]):t._e(),t._v(" "),n("button",{staticClass:"newEntry",on:{click:t.addNewEntry}},[t._v("新增")])])},staticRenderFns:[]};var y=n("VU/8")(C,$,!1,function(t){n("cFEO")},null,null).exports,L={data:function(){return{content:"",title:"",date:""}},mounted:function(){var t=this,e="/api/detail/"+this.$route.query.id+"/";this.$axios.post(e).then(function(e){if("1"===e.data.code){var n="";t.title=e.data.message.title,t.date=e.data.message.date,n=e.data.message.entry;var i=new RegExp("<img","gi");t.content=n.replace(i,'<img style="max-width: 100%; height: auto"')}}).catch(function(t){console.log(t)})}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail"},[n("p",{staticClass:"detail-title"},[t._v(t._s(t.title)),n("span",{staticClass:"date"},[t._v(t._s(t.date))])]),t._v(" "),n("div",{staticClass:"detail-content ql-editor",domProps:{innerHTML:t._s(t.content)}},[t._v(t._s(t.content))])])},staticRenderFns:[]};var k=n("VU/8")(L,E,!1,function(t){n("23WN")},null,null).exports;i.default.use(r.a);var N=new r.a({routes:[{path:"/",name:"HelloWorld",component:c},{path:"/login",name:"login",component:p},{path:"/topics",name:"topics",component:v},{path:"/WriteLog",name:"WriteLog",component:x},{path:"/entries",name:"entries",component:y},{path:"/detail",name:"detail",component:k}]}),b=n("NYxO"),q=n("mtWM"),D=n.n(q),R=n("mw3O"),O=n.n(R),P=(n("3f40"),n("4qOc"),n("+cgv"),n("GcMe"),n("zL8q")),I=n.n(P);n("tvR6");i.default.use(I.a),i.default.use(b.a),i.default.use(f.a),i.default.config.productionTip=!1,i.default.prototype.$axios=D.a,i.default.prototype.$qs=O.a,D.a.default.baseURI=Object({NODE_ENV:"production",API_ROOT:"http://127.0.0.1:8000/"}).BASE_API;var U=new b.a.Store({state:{topicList:[],username:window.localStorage.getItem("username"),loginStatus:window.localStorage.getItem("loginStatus")}});new i.default({el:"#app",router:N,store:U,render:function(t){return t(a)}})},Q7G0:function(t,e){},cFEO:function(t,e){},d26x:function(t,e){},odPN:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.31f42fb1881ec3463351.js.map